---
description: 模块与包结构规范
globs: "**/modules/**/*.java,**/common/**/*.java"
alwaysApply: false
---

# 项目结构与包规范

## 模块包结构

- 业务模块：`com.shadow.template.modules.<模块名>`（如 `modules.auth`、`modules.user`）
- 通用代码：`com.shadow.template.common`（result、exception、util、filter）

## 固定子包（按需使用，不得自创）

| 子包 | 用途 | 示例 |
|------|------|------|
| controller | REST 接口，DTO→Command 转换、调用 Service、返回 Result | AuthController |
| dto | 请求入参、内部 Command | UserLoginDto, UserLoginCommand |
| vo | 返回视图对象 | TokenResponseVo |
| entity | 数据库实体 | UserAuthEntity |
| mapper | 数据访问，仅与 Entity 交互 | UserAuthMapper |
| service | 业务入口接口 | AuthService |
| service.impl | 业务实现，可调用 Mapper、其他 Service | AuthServiceImpl |
| enums | 枚举 | LoginTypeEnum |
| constants | 常量 | AuthRegex |
| validation | 自定义校验 | LoginConstraint |

## 命名约定

- `*Dto`：请求体入参（Controller 接收）
- `*Vo`：返回视图（仅含需展示字段）
- `*Command`：内部入参（Controller→Service，禁止作为 REST 请求体）
- `*Entity`：持久化实体

## 禁止

- 在 controller 包放置非 Controller 类
- 在 dto 中混入纯返回类型（用 Vo）
- 将 Command 作为 `@RequestBody` 类型暴露给前端

## 自检清单

- [ ] 新类放在正确子包
- [ ] 类名后缀符合 Dto/Vo/Command/Entity 约定
- [ ] 未在 dto 中定义纯返回结构
